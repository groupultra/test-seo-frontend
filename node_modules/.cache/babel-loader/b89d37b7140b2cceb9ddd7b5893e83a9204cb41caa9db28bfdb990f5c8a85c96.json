{"ast":null,"code":"import React,{useState,useEffect}from'react';import ReactMarkdown from'react-markdown';import{useParams}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";const MarkdownViewer=()=>{const{chapter}=useParams();const[content,setContent]=useState('');const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const formattedChapter=chapter.padStart(3,'0');const markdownUrl=\"/three_kingdom/chapter_\".concat(formattedChapter,\".md\");setLoading(true);setError(null);fetch(markdownUrl).then(response=>{if(!response.ok){throw new Error(\"\\u7AE0\\u8282 \".concat(formattedChapter,\" \\u4E0D\\u5B58\\u5728\"));}return response.text();}).then(text=>{const cleanText=text.replace(/^\\uFEFF/,'');const cleanedContent=cleanText.split('\\n\\n').filter(paragraph=>!paragraph.includes('uutxt.com')&&!paragraph.includes('niaoyan.com')&&!paragraph.includes('[a]')&&!paragraph.includes('[b]')&&!paragraph.includes('[c]')&&!paragraph.includes('[d]')&&!paragraph.includes('[e]')&&!paragraph.includes('[f]')&&!paragraph.includes('[g]')&&!paragraph.includes('[h]')).join('\\n\\n');setContent(cleanedContent);setLoading(false);}).catch(error=>{console.error('加载markdown文件时出错:',error);setError(error.message);setLoading(false);});},[chapter]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u52A0\\u8F7D\\u4E2D...\"});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error});}return/*#__PURE__*/_jsx(\"div\",{className:\"markdown-container\",children:/*#__PURE__*/_jsx(ReactMarkdown,{children:content})});};export default MarkdownViewer;","map":{"version":3,"names":["React","useState","useEffect","ReactMarkdown","useParams","jsx","_jsx","MarkdownViewer","chapter","content","setContent","loading","setLoading","error","setError","formattedChapter","padStart","markdownUrl","concat","fetch","then","response","ok","Error","text","cleanText","replace","cleanedContent","split","filter","paragraph","includes","join","catch","console","message","className","children"],"sources":["/Users/shangjianliu/Desktop/test_markdown/three-kingdoms-reader/src/components/MarkdownViewer.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { useParams } from 'react-router-dom';\n\nconst MarkdownViewer = () => {\n  const { chapter } = useParams();\n  const [content, setContent] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const formattedChapter = chapter.padStart(3, '0');\n    const markdownUrl = `/three_kingdom/chapter_${formattedChapter}.md`;\n    \n    setLoading(true);\n    setError(null);\n\n    fetch(markdownUrl)\n      .then(response => {\n        if (!response.ok) {\n          throw new Error(`章节 ${formattedChapter} 不存在`);\n        }\n        return response.text();\n      })\n      .then(text => {\n        const cleanText = text.replace(/^\\uFEFF/, '');\n        const cleanedContent = cleanText.split('\\n\\n').filter(paragraph => \n          !paragraph.includes('uutxt.com') && \n          !paragraph.includes('niaoyan.com') &&\n          !paragraph.includes('[a]') &&\n          !paragraph.includes('[b]') &&\n          !paragraph.includes('[c]') &&\n          !paragraph.includes('[d]') &&\n          !paragraph.includes('[e]') &&\n          !paragraph.includes('[f]') &&\n          !paragraph.includes('[g]') &&\n          !paragraph.includes('[h]')\n        ).join('\\n\\n');\n        setContent(cleanedContent);\n        setLoading(false);\n      })\n      .catch(error => {\n        console.error('加载markdown文件时出错:', error);\n        setError(error.message);\n        setLoading(false);\n      });\n  }, [chapter]);\n\n  if (loading) {\n    return <div className=\"loading\">加载中...</div>;\n  }\n\n  if (error) {\n    return <div className=\"error\">{error}</div>;\n  }\n\n  return (\n    <div className=\"markdown-container\">\n      <ReactMarkdown>{content}</ReactMarkdown>\n    </div>\n  );\n};\n\nexport default MarkdownViewer; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}